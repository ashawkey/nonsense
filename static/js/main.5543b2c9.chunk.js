(this.webpackJsonpnonsense=this.webpackJsonpnonsense||[]).push([[0],{31:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(48),l=n.n(c),o=(n(67),n(7)),u=n(1),s=n(49),i=n.n(s),m=(n(31),n(3)),f=n(50),d=n.n(f),b="https://www.kiui.moe/api/nonsense";n(73);function E(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),c=t.getHours(),l=t.getMinutes();return n+"-"+a+"-"+r+" "+(c<=9?"0"+c:c)+":"+(l<=9?"0"+l:l)}function h(){return localStorage.nonsense_token||"nonsense"}function p(e){return r.a.createElement("div",{className:"flow-item"},r.a.createElement(o.b,{to:"/edit/"+e.value[0]},r.a.createElement("div",{className:"date"},r.a.createElement("span",null," ",function(e,t){var n="000000000"+e.toString();return n.substr(n.length-t)}(e.value[0],6)," "),r.a.createElement("span",null," "," "+E(e.value[2])," "),r.a.createElement("span",null," "," "+E(e.value[1])," ")),r.a.createElement("hr",null),r.a.createElement("div",{className:"content"},(t=e.value[3],n=300,t.length>n?t.substring(0,n)+"......":t))));var t,n}var v=function(e){return r.a.createElement("div",{className:"flow"},e.items.map((function(e,t){return r.a.createElement(p,{value:e,key:t})})))};var g=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!0),o=Object(m.a)(l,2),u=o[0],s=o[1],i=r.a.createElement("div",{className:"loading",key:0}," ",r.a.createElement("span",{role:"img","aria-label":"loading"},"\ud83c\udf12")," ");return r.a.createElement("div",{className:"Home"},r.a.createElement(d.a,{pageStart:0,loadMore:function(e){fetch(b+"/meta?token="+h()+"&page="+e).then((function(e){return e.json()})).then((function(e){c(n.concat(e.meta)),s(e.hasMore)}))},hasMore:u,loader:i},r.a.createElement(v,{items:n})))};n(76);var j=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(u.g)();return Object(a.useEffect)((function(){c(localStorage.nonsense_token||"")}),[]),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==n?(localStorage.nonsense_token=n,alert("Hello, "+n+"!")):(localStorage.nonsense_token="nonsense",alert("Hello, nonsense!")),l.push("/")},className:"login-form"},r.a.createElement("div",{className:"title"}," Make any sense ? "),r.a.createElement("input",{type:"text",value:n,placeholder:"nonsense",maxLength:"99",onChange:function(e){c(e.target.value)}})))},O=(n(77),n(15)),w=n(52),N=n(53),S=n(61),k=n(60),y=n(54),D=n.n(y),C=n(20),x=n.n(C),M=n(55),H=n.n(M),A=n(389),P=n(388),L=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=e.language,n=e.value;return r.a.createElement(A.a,{language:t,style:P.a},n)}}]),n}(a.PureComponent);L.defaultProps={language:null};var F=function(e){var t=Object(O.a)(Object(O.a)({},e),{},{plugins:[H.a],renderers:Object(O.a)(Object(O.a)({},e.renderers),{},{code:L,math:function(e){return r.a.createElement(x.a.Node,{formula:e.value})},inlineMath:function(e){return r.a.createElement(x.a.Node,{inline:!0,formula:e.value})}})});return r.a.createElement(x.a.Provider,{input:"tex"},r.a.createElement(D.a,t))},_=n(59),z=n.n(_);n(381),n(382),n(383),n(384);var I=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(0),o=Object(m.a)(l,2),s=(o[0],o[1]),i=Object(a.useState)(0),f=Object(m.a)(i,2),d=f[0],p=f[1],v=Object(a.useState)(!0),g=Object(m.a)(v,2),j=g[0],O=g[1],w=Object(a.useState)("\ud83d\udfe2"),N=Object(m.a)(w,2),S=N[0],k=N[1],y=Object(a.useState)(2),D=Object(m.a)(y,2),C=D[0],x=D[1],M=Object(a.useState)("-1"),H=Object(m.a)(M,2),A=H[0],P=H[1],L=Object(a.useRef)(null),_=Object(a.useState)(0),I=Object(m.a)(_,2),R=I[0],T=I[1],V=Object(u.g)(),B=Object(u.h)().nid;function J(e){if("\ud83d\udd34"===S||"\ud83d\udfe0"===S||"\ud83d\udfe1"===S)return e.preventDefault(),e.returnValue="Draft unsaved"}function U(){if("\ud83d\udfe0"===S)if(k("\ud83d\udfe1"),"-1"===A){var e=new FormData;e.append("token",h()),e.append("body",n),e.append("state",C),fetch(b+"/post",{method:"POST",body:e}).then((function(e){return e.json()})).catch((function(e){console.error("Post error: ",e),k("\ud83d\udd34")})).then((function(e){console.log(e),P(e.nid.toString()),k("\ud83d\udfe2")}))}else{var t=new FormData;t.append("nid",A),t.append("body",n),t.append("state",C),fetch(b+"/update",{method:"POST",body:t}).then((function(e){return e.json()})).catch((function(e){console.error("Update error: ",e),k("\ud83d\udd34")})).then((function(e){k("\ud83d\udfe2")}))}}function Y(e){e.preventDefault(),c(e.target.value),k("\ud83d\udfe0")}function G(e){c(e),k("\ud83d\udfe0")}function K(e,t){e.preventDefault(),x(t),k("\ud83d\udfe0")}function q(e){9===e.keyCode&&(e.preventDefault(),c(n.substring(0,L.current.selectionStart)+"    "+n.substring(L.current.selectionEnd)),T(L.current.selectionStart))}function Q(e){return window.screen.width<=600?0===e?"R":1===e?"V":2===e?"A":"E":0===e?"Raw":1===e?"View":2===e?"Ace":"Error"}return Object(a.useEffect)((function(){"-1"===B?(P(B),s(Date.now()/1e3),p(Date.now()/1e3),c(""),O(!1)):(P(B),fetch(b+"/get?nid="+B+"&token="+h()).then((function(e){return e.json()})).then((function(e){e.success?(s(e.content[0]),p(e.content[1]),c(e.content[2]),x(e.content[4]),O(!1)):(x(e.error),O(!1))})))}),[B]),Object(a.useEffect)((function(){var e=setInterval(U,1e3);return function(){clearInterval(e)}})),Object(a.useEffect)((function(){return window.addEventListener("beforeunload",J),function(){window.removeEventListener("beforeunload",J)}})),Object(a.useEffect)((function(){null!=L.current&&(L.current.selectionStart=R+4,L.current.selectionEnd=R+4)}),[R]),j?r.a.createElement("div",{className:"loading"}," ",r.a.createElement("span",{role:"img","aria-label":"loading"},"\ud83c\udf12")," "):r.a.createElement("div",{className:"editor"},r.a.createElement("div",{className:"date"},"| ",r.a.createElement("span",null," ",E(d)," "),"| ",r.a.createElement("span",{onClick:function(e){K(e,0)},className:"button"}," ",Q(0)," "),"| ",r.a.createElement("span",{onClick:function(e){K(e,1)},className:"button"}," ",Q(1)," "),"| ",r.a.createElement("span",{onClick:function(e){K(e,2)},className:"button"}," ",Q(2)," "),"| ",r.a.createElement("span",{onClick:function(e){if(e.preventDefault(),window.confirm("Are you sure to delete?")){var t=new FormData;t.append("nid",A),t.append("token",h()),fetch(b+"/delete",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.success?V.push("/"):alert(e.error)}))}},className:"button",role:"img","aria-label":"delete"}," \u274c "),"| ",r.a.createElement("span",{onClick:function(e){e.preventDefault(),k("\ud83d\udfe0")},className:"button"}," ",function(e){return"\ud83d\udd34"===e?r.a.createElement("span",{role:"img","aria-label":"failed"}," \ud83d\udd34 "):"\ud83d\udfe2"===e?r.a.createElement("span",{role:"img","aria-label":"saved"}," \ud83d\udfe2 "):e}(S)," ")," |"),function(e){return 0===e?r.a.createElement("textarea",{ref:L,onKeyDown:q,onChange:Y,value:n,style:{height:window.innerHeight-200}}):1===e?r.a.createElement(F,{className:"markdown",source:n}):2===e?r.a.createElement(z.a,{mode:"markdown",theme:"github",name:"editor",value:n,onChange:G,height:(window.innerHeight-200).toString()+"px",width:"100%",showGutter:!(window.screen.width<=600),showPrintMargin:!1,highlightActiveLine:!0,placeholder:"",keyboardHandler:"vscode",fontSize:16,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!(window.screen.width<=600),tabSize:2,fontFamily:"Consolas,'Microsoft Yahei','Helvetica Neue', Helvetica, Arial, sans-serif"}}):e}(C),r.a.createElement(u.a,{message:"Draft unsaved, are you sure to leave?",when:"\ud83d\udd34"===S||"\ud83d\udfe0"===S||"\ud83d\udfe1"===S}))};var R=function(){var e=Object(u.g)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],l=n[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==c&&(e.push("/search/"+c),l(""))}},r.a.createElement("input",{type:"text",value:c,placeholder:"search",onChange:function(e){l(e.target.value)}}))};var T=function(){var e=Object(u.h)().keyword,t=Object(a.useState)([]),n=Object(m.a)(t,2),c=n[0],l=n[1];return Object(a.useEffect)((function(){fetch(b+"/search?keyword="+e+"&token="+h()).then((function(e){return e.json()})).then((function(e){l(e)}))}),[e]),r.a.createElement("div",{className:"search-results"},r.a.createElement(v,{items:c}))};function V(){return r.a.createElement("div",{className:"no-match"},r.a.createElement("p",null," No match! "))}var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title"}," ",r.a.createElement(o.b,{to:"/"}," N",r.a.createElement("span",{style:{fontSize:"20px"},role:"img","aria-label":"o"},"\ud83c\udf11"),"NSeNSe ")," "),r.a.createElement("div",{className:"new-button"}," ",r.a.createElement(o.b,{to:"/edit/-1"}," + ")," "),r.a.createElement("div",{className:"login-button"}," ",r.a.createElement(o.b,{to:"/login"}," \u2699 ")," "),r.a.createElement("div",{className:"search-bar"}," ",r.a.createElement(R,null)," ")),r.a.createElement("div",{className:"content"},r.a.createElement("hr",{className:"fancy-line"}),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login"},r.a.createElement(j,null)),r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(g,null)),r.a.createElement(u.b,{path:"/search/:keyword"},r.a.createElement(T,null)),r.a.createElement(u.b,{path:"/edit/:nid"},r.a.createElement(I,null)),r.a.createElement(u.b,{path:"*"},r.a.createElement(V,null))),r.a.createElement("hr",{className:"fancy-line"})),r.a.createElement(i.a,{showUnder:160},r.a.createElement("span",{className:"up-arrow",role:"img","aria-label":"up"}," \ud83c\udf20 "))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))},62:function(e,t,n){e.exports=n(385)},67:function(e,t,n){},73:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.5543b2c9.chunk.js.map